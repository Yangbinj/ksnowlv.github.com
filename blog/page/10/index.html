
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>ksnowlv</title>
  <meta name="author" content="律威">

  
  <meta name="description" content="Python的Queue模块中提供了同步的、线程安全的队列类. 1.FIFO（先入先出)队列Queue，
2.LIFO（后入先出）队列LifoQueue，
3.优先级队列PriorityQueue。 这些队列都实现了锁原语，能够在多线程中直接使用。可以使用队列来实现线程间的同步。 代码示例如下: &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://ksnowlv.github.io/blog/page/10">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="ksnowlv" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
     _gaq.push(['_setAccount', 'UA-39546615-2']);
    // _gaq.push(['_trackPageview']);

    // (function() {
    //   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    //   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    //   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    // })();

    _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src='http://droidyue-tools.qiniudn.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">ksnowlv</a></h1>
  
    <h2>回顾过去,总结以往;立足现在,铭记当下;技术为主,笔记而已.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:ksnowlv.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">博客首页</a></li>
  <li><a href="/blog/archives">文章列表</a></li>
  <!-- <li><a href="/about-me">关于我</a></li>
 -->
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/08/python-xian-cheng-zhi-dui-lie-queue/">python线程之队列Queue</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-08T23:44:00+08:00" pubdate data-updated="true">Aug 8<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/08/python-xian-cheng-zhi-dui-lie-queue/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Python的Queue模块中提供了同步的、线程安全的队列类.</p>

<pre><code>1.FIFO（先入先出)队列Queue，
2.LIFO（后入先出）队列LifoQueue，
3.优先级队列PriorityQueue。
</code></pre>

<p>这些队列都实现了锁原语，能够在多线程中直接使用。可以使用队列来实现线程间的同步。</p>

<p>代码示例如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">Queue</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">threading</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'>
</span><span class='line'><span class="n">exitFlag</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QThread</span> <span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="s">&quot;QThread class&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threadID</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">queue</span><span class="p">):</span>
</span><span class='line'>        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">threadID</span> <span class="o">=</span> <span class="n">threadID</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">queue</span> <span class="o">=</span> <span class="n">queue</span>
</span><span class='line'>
</span><span class='line'>    <span class="c">#线程函数</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;Starting &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'>        <span class="n">process_data</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">queue</span><span class="p">)</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;Exiting &quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'>
</span><span class='line'><span class="c">#处理数据</span>
</span><span class='line'><span class="k">def</span> <span class="nf">process_data</span><span class="p">(</span><span class="n">threadName</span><span class="p">,</span> <span class="n">q</span><span class="p">):</span>
</span><span class='line'>    <span class="k">while</span> <span class="ow">not</span> <span class="n">exitFlag</span><span class="p">:</span>
</span><span class='line'>        <span class="n">queueLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</span><span class='line'>        <span class="k">if</span> <span class="ow">not</span> <span class="n">workQueue</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span class='line'>            <span class="n">data</span> <span class="o">=</span> <span class="n">q</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
</span><span class='line'>            <span class="n">queueLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span class='line'>            <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> processing </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">threadName</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="n">queueLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span class='line'>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">threadList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;ksnow&quot;</span><span class="p">,</span> <span class="s">&quot;kair&quot;</span><span class="p">,</span> <span class="s">&quot;baby&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">nameList</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;One&quot;</span><span class="p">,</span> <span class="s">&quot;Two&quot;</span><span class="p">,</span> <span class="s">&quot;Three&quot;</span><span class="p">,</span> <span class="s">&quot;Four&quot;</span><span class="p">,</span> <span class="s">&quot;Five&quot;</span><span class="p">]</span>
</span><span class='line'><span class="n">queueLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c">#创建FIFO（先入先出)队列Queue</span>
</span><span class='line'><span class="n">workQueue</span> <span class="o">=</span> <span class="n">Queue</span><span class="o">.</span><span class="n">Queue</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</span><span class='line'><span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'><span class="n">threadID</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 创建新线程</span>
</span><span class='line'><span class="k">for</span> <span class="n">tName</span> <span class="ow">in</span> <span class="n">threadList</span><span class="p">:</span>
</span><span class='line'>    <span class="n">thread</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="n">threadID</span><span class="p">,</span> <span class="n">tName</span><span class="p">,</span> <span class="n">workQueue</span><span class="p">)</span>
</span><span class='line'>    <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class='line'>    <span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread</span><span class="p">)</span>
</span><span class='line'>    <span class="n">threadID</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 填充队列</span>
</span><span class='line'><span class="n">queueLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</span><span class='line'><span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">nameList</span><span class="p">:</span>
</span><span class='line'>    <span class="n">workQueue</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</span><span class='line'><span class="n">queueLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 等待队列清空</span>
</span><span class='line'><span class="k">while</span> <span class="ow">not</span> <span class="n">workQueue</span><span class="o">.</span><span class="n">empty</span><span class="p">():</span>
</span><span class='line'>    <span class="k">pass</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 通知线程是时候退出</span>
</span><span class='line'><span class="n">exitFlag</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 等待所有线程完成</span>
</span><span class='line'><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Exiting Main Thread&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下:</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python thread_queue.py
Starting ksnow
Starting kair
Starting baby
kair processing One
ksnow processing Two
baby processing Three
ksnow processing Four
kair processing Five
Exiting baby
Exiting ksnow
Exiting kair
Exiting Main Thread
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/08/python-xian-cheng-zhi-tong-bu/">Python线程之同步</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-08T23:05:00+08:00" pubdate data-updated="true">Aug 8<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/08/python-xian-cheng-zhi-tong-bu/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>如果多个线程共同对某个数据修改访问，为了保证数据的正确性，需要对多个线程进行同步。</p>

<p>使用Thread对象的Lock和Rlock可以实现简单的线程同步，</p>

<pre><code>acquire:请求锁,成功则返回true.
release:释放锁.
</code></pre>

<p>对于需要每次只允许一个线程操作的数据，可以使用上述锁来实现互斥访问。</p>

<p>代码示例如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">threading</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QThread</span> <span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot; QThread class&quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threadID</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
</span><span class='line'>        <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">threadID</span> <span class="o">=</span> <span class="n">threadID</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">counter</span> <span class="o">=</span> <span class="n">counter</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="c">#线程的run函数</span>
</span><span class='line'>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> running&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'>       <span class="c"># 获得锁，成功获得锁定后返回True</span>
</span><span class='line'>       <span class="c"># 可选的timeout参数不填时将一直阻塞直到获得锁定</span>
</span><span class='line'>       <span class="c"># 否则超时后将返回False</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">threadLock</span><span class="o">.</span><span class="n">acquire</span><span class="p">()</span>
</span><span class='line'>        <span class="n">showThreadMessage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">counter</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'>        <span class="c"># 释放锁</span>
</span><span class='line'>        <span class="n">threadLock</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">showThreadMessage</span><span class="p">(</span><span class="n">threadName</span><span class="p">,</span> <span class="n">delay</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">counter</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delay</span><span class="p">)</span>
</span><span class='line'>        <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> showThreadMessage&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">threadName</span><span class="p">)</span>
</span><span class='line'>        <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="n">threadLock</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Lock</span><span class="p">()</span>
</span><span class='line'><span class="n">threads</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 创建新线程</span>
</span><span class='line'><span class="n">thread1</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;KSnow&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'><span class="n">thread2</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s">&quot;KAir&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 线程开始执行</span>
</span><span class='line'><span class="n">thread1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class='line'><span class="n">thread2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 添加线程到线程列表</span>
</span><span class='line'><span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread1</span><span class="p">)</span>
</span><span class='line'><span class="n">threads</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">thread2</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c"># 等待所有线程完成</span>
</span><span class='line'><span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">threads</span><span class="p">:</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">join</span><span class="p">()</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Exiting From Main Thread&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行情况如下:</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python thread_synchronization.py
KSnow running
KAir running
KSnow showThreadMessage
KSnow showThreadMessage
KSnow showThreadMessage
KAir showThreadMessage
KAir showThreadMessage
KAir showThreadMessage
Exiting From Main Thread
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/07/python-xian-cheng-zhi-threading/">Python线程之Threading</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-07T22:05:00+08:00" pubdate data-updated="true">Aug 7<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/07/python-xian-cheng-zhi-threading/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>接上文，介绍下<code>类包装线程对象方式</code>使用线程</h4>

<h4>python通过两个标准库thread和threading提供对线程的支持。thread提供了低级别的、原始的线程以及一个简单的锁。</h4>

<h4>样例会使用Threading模块创建线程，涉及到线程启动和运行</h4>

<pre><code>run(): 用以表示线程活动的方法。
start():启动线程活动。
</code></pre>

<p>我们的QThread类会从threading.Thread继承，然后重写<strong>init</strong>方法和run方法。</p>

<p>示例代码如下</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">threading</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'>
</span><span class='line'><span class="n">exitFlag</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QThread</span><span class="p">(</span><span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">):</span><span class="c">#</span>
</span><span class='line'>
</span><span class='line'>  <span class="sd">&quot;&quot;&quot;QThread class&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">threadID</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
</span><span class='line'>      <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">__threadID</span> <span class="o">=</span> <span class="n">threadID</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">__name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">__counter</span> <span class="o">=</span> <span class="n">counter</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span><span class="c">#线程在创建后会直接运行run函数 </span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> start&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">)</span>
</span><span class='line'>      <span class="n">showMessage</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__name</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__counter</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;Exit from&quot;</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">__name</span>
</span><span class='line'>  
</span><span class='line'>  
</span><span class='line'><span class="c">#定义函数</span>
</span><span class='line'><span class="k">def</span> <span class="nf">showMessage</span><span class="p">(</span><span class="n">threadName</span><span class="p">,</span> <span class="n">delayTime</span><span class="p">,</span> <span class="n">counter</span><span class="p">):</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">while</span> <span class="n">counter</span><span class="p">:</span>
</span><span class='line'>
</span><span class='line'>          <span class="k">if</span> <span class="n">exitFlag</span><span class="p">:</span>
</span><span class='line'>              <span class="n">thread</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'>          <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delayTime</span><span class="p">)</span>
</span><span class='line'>          <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> : </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">threadName</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span> <span class="p">)</span>
</span><span class='line'>          <span class="n">counter</span> <span class="o">-=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="c">#创建线程</span>
</span><span class='line'><span class="n">t1</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;ksnow&quot;</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span><span class='line'><span class="n">t2</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;kair&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'><span class="n">t3</span> <span class="o">=</span> <span class="n">QThread</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="s">&quot;baby&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="c">#开启线程</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class='line'><span class="n">t2</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class='line'><span class="n">t3</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;exit from Main Thread&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下：</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python python_threading.py 
ksnow start
kair start
baby start
exit from Main Thread
ksnow : Thu Aug  7 22:41:42 2014
kair : Thu Aug  7 22:41:43 2014
baby : Thu Aug  7 22:41:43 2014
ksnow : Thu Aug  7 22:41:44 2014
kair : Thu Aug  7 22:41:46 2014
baby : Thu Aug  7 22:41:46 2014
ksnow : Thu Aug  7 22:41:46 2014
ksnow : Thu Aug  7 22:41:48 2014
kair : Thu Aug  7 22:41:49 2014
baby : Thu Aug  7 22:41:49 2014
ksnow : Thu Aug  7 22:41:50 2014
kair : Thu Aug  7 22:41:52 2014
baby : Thu Aug  7 22:41:52 2014
ksnow : Thu Aug  7 22:41:52 2014
Exit fromksnow
baby : Thu Aug  7 22:41:55 2014
 kair : Thu Aug  7 22:41:55 2014
baby : Thu Aug  7 22:41:58 2014
 Exit frombaby
kair : Thu Aug  7 22:41:58 2014
Exit fromkair
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/07/python-xian-cheng-zhi-start-new-thread/">Python线程之start_new_thread</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-07T21:13:00+08:00" pubdate data-updated="true">Aug 7<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/07/python-xian-cheng-zhi-start-new-thread/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>Python中使用线程有两种方式：</h4>

<pre><code>1.函数式方式
2.类包装线程对象方式。
</code></pre>

<p>下面使用<code>函数式方式</code>，调用thread模块中的start_new_thread()函数来产生新线程。</p>

<p>语法格式如下:</p>

<pre><code>thread.start_new_thread ( function, args[, kwargs] )
</code></pre>

<p>代码示例如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">thread</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">time</span>
</span><span class='line'>
</span><span class='line'><span class="c">#为线程定义一个函数</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span>  <span class="nf">showTime</span><span class="p">(</span><span class="n">threadName</span><span class="p">,</span><span class="n">delayTime</span><span class="p">):</span>
</span><span class='line'>  <span class="n">countTime</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">while</span> <span class="n">countTime</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
</span><span class='line'>      <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">delayTime</span><span class="p">)</span>
</span><span class='line'>      <span class="n">countTime</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> : </span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">threadName</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">ctime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="c">#创建线程</span>
</span><span class='line'><span class="k">try</span><span class="p">:</span>
</span><span class='line'>  <span class="n">thread</span><span class="o">.</span><span class="n">start_new_thread</span> <span class="p">(</span><span class="n">showTime</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;ksnow thread&quot;</span><span class="p">,</span> <span class="mi">2</span> <span class="p">)</span> <span class="p">)</span>
</span><span class='line'>  <span class="n">thread</span><span class="o">.</span><span class="n">start_new_thread</span> <span class="p">(</span><span class="n">showTime</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;kair thread&quot;</span><span class="p">,</span> <span class="mi">3</span> <span class="p">)</span> <span class="p">)</span>
</span><span class='line'>  <span class="n">thread</span><span class="o">.</span><span class="n">start_new_thread</span> <span class="p">(</span><span class="n">showTime</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;baby thread&quot;</span><span class="p">,</span> <span class="mi">5</span> <span class="p">)</span> <span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">except</span><span class="p">:</span>
</span><span class='line'>  <span class="k">print</span> <span class="s">&quot;Error: unable to start thread&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="k">while</span> <span class="mi">1</span><span class="p">:</span>
</span><span class='line'>   <span class="k">pass</span>
</span><span class='line'>
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下：</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python thread_start_new_thread.py 
ksnow thread : Thu Aug  7 21:11:33 2014
kair thread : Thu Aug  7 21:11:34 2014
ksnow thread : Thu Aug  7 21:11:35 2014
baby thread : Thu Aug  7 21:11:36 2014
kair thread : Thu Aug  7 21:11:37 2014
ksnow thread : Thu Aug  7 21:11:37 2014
ksnow thread : Thu Aug  7 21:11:39 2014
kair thread : Thu Aug  7 21:11:40 2014
baby thread : Thu Aug  7 21:11:41 2014
ksnow thread : Thu Aug  7 21:11:41 2014
kair thread : Thu Aug  7 21:11:43 2014
baby thread : Thu Aug  7 21:11:46 2014
kair thread : Thu Aug  7 21:11:46 2014
baby thread : Thu Aug  7 21:11:51 2014
baby thread : Thu Aug  7 21:11:56 2014
</code></pre>

<h4>注意事项</h4>

<pre><code>1.线程的结束一般依靠线程函数的自然结束；
2.可以在线程函数中调用thread.exit()，
抛出SystemExit exception，达到退出线程的目的。
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/07/python-mian-xiang-dui-xiang-han-shu-zhong-zai/">Python面向对象函数重载</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-07T13:40:00+08:00" pubdate data-updated="true">Aug 7<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/07/python-mian-xiang-dui-xiang-han-shu-zhong-zai/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>python支持函数重载，和C++/Objective-c/Java类似。</h4>

<pre><code>适用场景:父类的方法不能满足你的需求.
</code></pre>

<p>代码示例如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#！/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QBaseClass</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>  <span class="sd">&quot;&quot;&quot;QBaseClass class&quot;&quot;&quot;</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">(</span><span class="n">QBaseClass</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">showMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;className = </span><span class="si">%s</span><span class="s">&quot;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">QBaseClass</span><span class="o">.</span><span class="n">__name__</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QPerson</span><span class="p">(</span><span class="n">QBaseClass</span><span class="p">):</span>
</span><span class='line'>  <span class="sd">&quot;&quot;&quot;QPerson class&quot;&quot;&quot;</span>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span><span class="n">address</span><span class="p">):</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">(</span><span class="n">QPerson</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">showMessage</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;className = </span><span class="si">%s</span><span class="s">, address = </span><span class="si">%s</span><span class="s"> &quot;</span>  <span class="o">%</span> <span class="p">(</span><span class="n">QPerson</span><span class="o">.</span><span class="n">__name__</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">p1</span> <span class="o">=</span> <span class="n">QPerson</span><span class="p">(</span><span class="s">&quot;ksnowlv&quot;</span><span class="p">,</span><span class="s">&quot;北京市朝阳区&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">p1</span><span class="o">.</span><span class="n">showMessage</span><span class="p">()</span>
</span><span class='line'><span class="c">#下面是调用p1父类的同名方法，看起来是不是和Objective-c类似</span>
</span><span class='line'><span class="nb">super</span><span class="p">(</span><span class="n">QPerson</span><span class="p">,</span><span class="n">p1</span><span class="p">)</span><span class="o">.</span><span class="n">showMessage</span><span class="p">()</span>
</span><span class='line'><span class="n">QBaseClass</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下:</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python overloadmethod.py 
className = QPerson, address = 北京市朝阳区
className = QBaseClass
className = QBaseClass
</code></pre>

<h4>下面两种写法虽然执行结果相同，那有什么不同呢？</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="nb">super</span><span class="p">(</span><span class="n">QPerson</span><span class="p">,</span><span class="n">p1</span><span class="p">)</span><span class="o">.</span><span class="n">showMessage</span><span class="p">()</span>
</span><span class='line'><span class="n">QBaseClass</span><span class="o">.</span><span class="n">showMessage</span><span class="p">(</span><span class="n">p1</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/07/ji-yu-octopress-de-github-bo-ke-shi-yong-gitguan-li-yuan-dai-ma-he-wang-ye-dai-ma/">基于octopress的github博客使用git管理源代码和网页代码</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-07T09:12:00+08:00" pubdate data-updated="true">Aug 7<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/07/ji-yu-octopress-de-github-bo-ke-shi-yong-gitguan-li-yuan-dai-ma-he-wang-ye-dai-ma/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>基于octopress的github/gitcafe博客，都会涉及到源代码管理。对于git,github/gitcafe的初学者而言，可能容易走弯路。</h4>

<p>先看下博客目录:
 <img src="/images/post/2014-08-07-ji-yu-octopress-de-github-bo-ke-shi-yong-gitguan-li-yuan-dai-ma-he-wang-ye-dai-ma/github-blog-dir.png" alt="image" /></p>

<pre><code>lvweigithubblog和_deploy两个目录下，是不同的git版本库，对应不同分支。一定不能搞乱。
在lvweigithubblog目录下,操作目录始终是在lvweigithubblog目录:
使用git命令操作远程source分支;
使用rake generate/deploy/new_post/...操作的是远程master分支。
</code></pre>

<h4>1.静态网页代码版本管理</h4>

<h4>网页生成，rake generate 是生成本地博客pulic目录下静态网页, rake deploy 是把public目录下的静态网页文件拷贝到<em>deploy目录下，并自动调用git命令把</em>deploy目录下网页文件上传到远程分支master.</h4>

<pre><code>_deploy下的git版本库，管理的是是网页文件，操作的是master分支
</code></pre>

<p>详情参考下图:</p>

<p> <img src="/images/post/2014-08-07-ji-yu-octopress-de-github-bo-ke-shi-yong-gitguan-li-yuan-dai-ma-he-wang-ye-dai-ma/git-for-master-github-pages.png" alt="image" /></p>

<h4>2.网页源代码版本管理</h4>

<h4>lvweigithubblog下的源文件管理，可以通过git相关命令，也可以使用sourcetree等工具进行管理。可以通过<code>git status</code>查看当前所在分支</h4>

<pre><code>lvweigithubblog根目录下的git版本库实际上只管理除了public,_deploy两个主要目录以外所有的文件，octopress的配置自动忽略这两个目录。只处理这两个目录以外的版本变化情况。

该git版本库处理的是远程source分支，你可以随便命名该分支，比如a都行，只要不和master分支重名即可。所以，这个git版本库必须切换到source分支，一定不能是master分支。
</code></pre>

<p>详情参考下图:</p>

<p> <img src="/images/post/2014-08-07-ji-yu-octopress-de-github-bo-ke-shi-yong-gitguan-li-yuan-dai-ma-he-wang-ye-dai-ma/git-for-source-code.png" alt="image" /></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/06/python-mian-xiang-dui-xiang-ji-cheng-pai-sheng/">Python面向对象-继承派生</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-06T23:24:00+08:00" pubdate data-updated="true">Aug 6<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/06/python-mian-xiang-dui-xiang-ji-cheng-pai-sheng/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>python是支持类的继承派生，通过这种继承派生机制，我们可以实现代码重用。其实，与C++/Objective-c/Java类似。</h4>

<h4>语法格式如下:</h4>

<pre><code>class 派生类名（基类名):
</code></pre>

<h4>python继承中的一些特点:</h4>

<h5>1.在继承中基类的构造（<strong>init</strong>()方法）<code>不会被自动调用</code>，它需要在其派生类的构造中手动调用。</h5>

<h5>2：在调用基类的方法时，需要加上基类的类名前缀，且需要带上self参数变量。区别于在类中调用普通函数时并不需要带上self参数</h5>

<h5>3：Python总是首先查找对应类型的方法，如果它不能在派生类中找到对应的方法，它才开始到基类中逐个查找。（先在本类中查找调用的方法，找不到才去基类中找）。</h5>

<h4>如果派生类继承的基类超过一个，那么该派生类就被称作&#8221;多重继承&#8221;.</h4>

<h4>语法格式如下：</h4>

<pre><code>class 派生类名（基类名1，基类2，...,基类n):
</code></pre>

<p>代码示例如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QBaseObject</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span> <span class="c">#define base class</span>
</span><span class='line'>
</span><span class='line'>  <span class="s">&quot;base class&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;QBaseObject no param&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;QBaseObject param name:&quot;</span><span class="p">,</span><span class="bp">self</span><span class="o">.</span><span class="n">name</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">setName</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span><span class="n">name</span><span class="p">):</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">getName</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">;</span>           
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QPerson</span><span class="p">(</span><span class="n">QBaseObject</span><span class="p">):</span>
</span><span class='line'>  <span class="sd">&quot;&quot;&quot;QPerson class&quot;&quot;&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">):</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">(</span><span class="n">QPerson</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">()</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;QPerson address&quot;</span>
</span><span class='line'>
</span><span class='line'>  
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span><span class="n">address</span><span class="p">):</span>
</span><span class='line'>      <span class="nb">super</span><span class="p">(</span><span class="n">QPerson</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="n">address</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;QPerson name &amp;address&quot;</span>
</span><span class='line'>
</span><span class='line'><span class="c">#p1 = QPerson(&quot;北京市朝阳区&quot;)</span>
</span><span class='line'><span class="c">#print &quot;p1 name = %s, address = %s value = %d&quot; % (p1.name,p1.address,QPerson.value)</span>
</span><span class='line'>
</span><span class='line'><span class="n">p2</span> <span class="o">=</span> <span class="n">QPerson</span><span class="p">(</span><span class="s">&quot;ksnowlv&quot;</span><span class="p">,</span><span class="s">&quot;北京市朝阳区&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">QPerson</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;p2 name = </span><span class="si">%s</span><span class="s">, address = </span><span class="si">%s</span><span class="s"> value = </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">p2</span><span class="o">.</span><span class="n">address</span><span class="p">,</span><span class="n">QPerson</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">p2</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="s">&quot;kAir&quot;</span><span class="p">)</span>
</span><span class='line'><span class="n">QPerson</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">2</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;p1 name = </span><span class="si">%s</span><span class="s">, address = </span><span class="si">%s</span><span class="s"> value = </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">p2</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">p2</span><span class="o">.</span><span class="n">address</span><span class="p">,</span><span class="n">QPerson</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">p2</span><span class="o">.</span><span class="n">setName</span><span class="p">(</span><span class="s">&quot;ksnowlv&quot;</span><span class="p">)</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;p2 名字还原为&quot;</span><span class="p">,</span><span class="n">p2</span><span class="o">.</span><span class="n">getName</span><span class="p">()</span>
</span><span class='line'>  
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下：</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$
python object_Inheritance.py 
QBaseObject param name: ksnowlv
QPerson name &amp;address
p2 name = ksnowlv, address = 北京市朝阳区 value = 1
p1 name = kAir, address = 北京市朝阳区 value = 2
p2 名字还原为 ksnowlv
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/06/python-mian-xiang-dui-xiang-python-dui-xiang-xiao-hui/">Python面向对象-python对象销毁</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-06T21:04:00+08:00" pubdate data-updated="true">Aug 6<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/06/python-mian-xiang-dui-xiang-python-dui-xiang-xiao-hui/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>同Java/Objective-c语言一样，Python使用了引用计数这一简单技术来追踪内存中的对象。</h4>

<h4>在Python内部记录着所有使用中的对象各有多少引用。一个内部跟踪变量，称为一个引用计数器。</h4>

<h4>当对象被创建时， 就创建了一个引用计数， 当这个对象不再需要时， 也就是说， 这个对象的引用计数变为0 时， 它被垃圾回收。但是回收不是&#8221;立即&#8221;的， 由解释器在适当的时机，将垃圾对象占用的内存空间回收。</h4>

<pre><code>a = 1 #创建对象a
b = a #对象a引用计数+1 
c = a #对象a引用计数+1

del a #对象a引用计数-1
b = 2 #对象a引用计数-1
c = 2 #对象a引用计数-1，此时对象a引用计数为0，可能会被回收
</code></pre>

<h4>垃圾回收机制不仅针对引用计数为0的对象;也可以处理循环引用的情况。</h4>

<pre><code>循环引用指的是，两个对象相互引用，但是没有其他变量引用他们。
这种情况下，仅使用引用计数是不够的。
Python 的垃圾收集器实际上是一个引用计数器和一个循环垃圾收集器。
作为引用计数的补充， 垃圾收集器也会留心被分配的总量很大（及未通过引用计数销毁的那些）的对象。 
在这种情况下， 解释器会暂停下来， 试图清理所有未引用的循环。
</code></pre>

<p>代码示例如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">QPoint</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>  <span class="s">&quot;point for QPoint&quot;</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">z</span> <span class="o">=</span> <span class="mi">0</span><span class="p">):</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">x</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">y</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">z</span> <span class="o">=</span> <span class="n">z</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="nf">__del__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>          <span class="n">class_name</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__class__</span><span class="o">.</span><span class="n">__name__</span>
</span><span class='line'>          <span class="k">print</span> <span class="n">class_name</span><span class="p">,</span><span class="s">&quot;destroyed&quot;</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="n">point1</span> <span class="o">=</span> <span class="n">QPoint</span><span class="p">()</span>
</span><span class='line'><span class="n">point2</span> <span class="o">=</span> <span class="n">point1</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="n">point3</span> <span class="o">=</span> <span class="n">QPoint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="nb">id</span><span class="p">(</span><span class="n">point1</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">point2</span><span class="p">),</span> <span class="nb">id</span><span class="p">(</span><span class="n">point3</span><span class="p">)</span> <span class="c">#输出对象的id</span>
</span><span class='line'>
</span><span class='line'><span class="c">#del point1</span>
</span><span class='line'><span class="c">#del point2</span>
</span><span class='line'><span class="c">#del point3</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下：</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python object_destroy.py 
4324792912 4324792912 4324954192
QPoint destroyed
QPoint destroyed
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/06/python-mian-xiang-dui-xiang-nei-zhi-lei-shu-xing/">Python面向对象-内置类属性</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-06T20:20:00+08:00" pubdate data-updated="true">Aug 6<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/06/python-mian-xiang-dui-xiang-nei-zhi-lei-shu-xing/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>python内置类属性</p>

<pre><code>__doc__:类的文档字符串.

__name__:类名.

__dict__:类的属性,包含一个字典，由类的数据属性组成

__module__: 类定义所在的模块

__base__:类的所有父类构成元素（包含了以个由所有父类组成的元组).
</code></pre>

<p>代码示例如下:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Teacher</span><span class="p">:</span>
</span><span class='line'>   <span class="s">&#39;Common base class for all teacher&#39;</span>
</span><span class='line'>   <span class="n">teacherCount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
</span><span class='line'>      <span class="n">Teacher</span><span class="o">.</span><span class="n">teacherCount</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">def</span> <span class="nf">displayCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>     <span class="k">print</span> <span class="s">&quot;Total Teacher </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">Teacher</span><span class="o">.</span><span class="n">teacherCount</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">def</span> <span class="nf">displayTeacher</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;Name : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>  <span class="s">&quot;, Age: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;This would create first object of Teacher class&quot;</span>
</span><span class='line'><span class="n">t1</span> <span class="o">=</span> <span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;张明&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</span><span class='line'><span class="s">&quot;This would create second object of Teacher class&quot;</span>
</span><span class='line'><span class="n">t2</span> <span class="o">=</span> <span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;李海&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">displayTeacher</span><span class="p">()</span>
</span><span class='line'><span class="n">t2</span><span class="o">.</span><span class="n">displayTeacher</span><span class="p">()</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Total Teacher </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">Teacher</span><span class="o">.</span><span class="n">teacherCount</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;添加一属性address&quot;</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="s">&quot;北京市朝阳区&quot;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> 居住在</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">t1</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;修改一属性address&quot;</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="s">&quot;北京市海淀区&quot;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> 搬家到</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">t1</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;删除属性address&quot;</span>
</span><span class='line'><span class="k">del</span> <span class="n">t1</span><span class="o">.</span><span class="n">address</span>
</span><span class='line'>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Teacher.__doc__&quot;</span><span class="p">,</span><span class="n">Teacher</span><span class="o">.</span><span class="n">__doc__</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Teacher.__name__&quot;</span><span class="p">,</span><span class="n">Teacher</span><span class="o">.</span><span class="n">__name__</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Teacher.__module__&quot;</span><span class="p">,</span><span class="n">Teacher</span><span class="o">.</span><span class="n">__module__</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Teacher.__bases__&quot;</span><span class="p">,</span><span class="n">Teacher</span><span class="o">.</span><span class="n">__bases__</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Teacher.__dict__&quot;</span><span class="p">,</span><span class="n">Teacher</span><span class="o">.</span><span class="n">__dict__</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行结果如下：</p>

<pre><code>ksnowlv@ksnowlvdeMacBook-Pro~/Documents/lvwei projects/python$python teacher_inner_property.py 
Name :  张明 , Age:  24
Name :  李海 , Age:  30
Total Teacher 2
张明 居住在北京市朝阳区
张明 搬家到北京市海淀区
Teacher.__doc__ Common base class for all teacher
Teacher.__name__ Teacher
Teacher.__module__ __main__
Teacher.__bases__ ()
Teacher.__dict__ {'__module__': '__main__', 
'displayCount': &lt;function displayCount at 0x10572c410&gt;, 
'displayTeacher': &lt;function displayTeacher at 0x10572cb18&gt;, 
'teacherCount': 2, 
'__doc__': 'Common base class for all teacher', 
'__init__': &lt;function __init__ at 0x105725d70&gt;}    
</code></pre>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2014/08/05/python-mian-xiang-dui-xiang-lei-ding-yi/">Python面向对象-类定义</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-08-05T23:33:00+08:00" pubdate data-updated="true">Aug 5<span>th</span>, 2014</time>
        
         | <a href="/blog/2014/08/05/python-mian-xiang-dui-xiang-lei-ding-yi/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h4>1.python类的定义</h4>

<p>使用class语句定义一个类，class之后为类的名称并以冒号结尾，如下实例:</p>

<pre><code>class ClassName:

   'Optional class documentation string'#类文档字符串

   class_body  #类体
</code></pre>

<p> <code>类的帮助信息</code>可以通过<code>ClassName.__doc__</code>查看。</p>

<p><code>class_body</code> 由<code>类成员</code>，<code>方法</code>，<code>数据属性</code>组成。</p>

<h4>2.创建老师类，类成员，方法，属性。</h4>

<h4>代码示例如下</h4>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/python</span>
</span><span class='line'>
</span><span class='line'><span class="k">class</span> <span class="nc">Teacher</span><span class="p">:</span>
</span><span class='line'>   <span class="s">&#39;Common base class for all teacher&#39;</span>
</span><span class='line'>   <span class="n">teacherCount</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">age</span><span class="p">):</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
</span><span class='line'>      <span class="bp">self</span><span class="o">.</span><span class="n">age</span> <span class="o">=</span> <span class="n">age</span>
</span><span class='line'>      <span class="n">Teacher</span><span class="o">.</span><span class="n">teacherCount</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">def</span> <span class="nf">displayCount</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>     <span class="k">print</span> <span class="s">&quot;Total Teacher </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">Teacher</span><span class="o">.</span><span class="n">teacherCount</span>
</span><span class='line'>
</span><span class='line'>   <span class="k">def</span> <span class="nf">displayTeacher</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span><span class='line'>      <span class="k">print</span> <span class="s">&quot;Name : &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>  <span class="s">&quot;, Age: &quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">age</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;This would create first object of Teacher class&quot;</span>
</span><span class='line'><span class="n">t1</span> <span class="o">=</span> <span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;张明&quot;</span><span class="p">,</span> <span class="mi">24</span><span class="p">)</span>
</span><span class='line'><span class="s">&quot;This would create second object of Teacher class&quot;</span>
</span><span class='line'><span class="n">t2</span> <span class="o">=</span> <span class="n">Teacher</span><span class="p">(</span><span class="s">&quot;李海&quot;</span><span class="p">,</span> <span class="mi">30</span><span class="p">)</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">displayTeacher</span><span class="p">()</span>
</span><span class='line'><span class="n">t2</span><span class="o">.</span><span class="n">displayTeacher</span><span class="p">()</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;Total Teacher </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">Teacher</span><span class="o">.</span><span class="n">teacherCount</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;添加一属性address&quot;</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="s">&quot;北京市朝阳区&quot;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> 居住在</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">t1</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;修改一属性address&quot;</span>
</span><span class='line'><span class="n">t1</span><span class="o">.</span><span class="n">address</span> <span class="o">=</span> <span class="s">&quot;北京市海淀区&quot;</span>
</span><span class='line'><span class="k">print</span> <span class="s">&quot;</span><span class="si">%s</span><span class="s"> 搬家到</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">t1</span><span class="o">.</span><span class="n">name</span><span class="p">,</span><span class="n">t1</span><span class="o">.</span><span class="n">address</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="s">&quot;删除属性address&quot;</span>
</span><span class='line'><span class="k">del</span> <span class="n">t1</span><span class="o">.</span><span class="n">address</span>
</span></code></pre></td></tr></table></div></figure>


<p>运行情况如下:</p>

<pre><code>Name :  张明 , Age:  24
Name :  李海 , Age:  30
Total Teacher 2
张明 居住在北京市朝阳区
张明 搬家到北京市海淀区
</code></pre>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/11/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/9/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>关于我</h1>
  <p>律威,QQ:309235009 微信:ksnowlv</p>
  <p>手机单机游戏/手机网游封神online/手机阅读/腾讯iOS地图客户端&实时公交&开放API(地图&街景)</p>
  <p>目前在做淘宝iPad客户端&性能优化.</p>
  <p>能做一点,是一点;不求大成,不求一万年;积少成多,水到渠成!</p>
</section>
<section>
  <h1>最近发布</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2015/04/16/mac-xia-ssh-keychang-yong-cao-zuo-ming-ling/">mac下ssh-key常用操作命令</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/03/24/pmd-cha-jian-de-shi-yong/">PMD插件的使用</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/06/ios-64wei-gua-pei/">iOS-64位适配</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/01/04/nian-wei-li-zhi/">年尾离职</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/12/03/zu-zhi-wen-jian-bei-ituneshe-icloudtong-bu/">阻止文件被iTunes和iCloud同步</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>分类</h1>
    <ul id="category-list"><li><a href='/blog/categories/androidcha-jian/'>Android插件 (1)</a></li><li><a href='/blog/categories/c-slash-c-plus-plus/'>C/C++ (1)</a></li><li><a href='/blog/categories/git/'>git (6)</a></li><li><a href='/blog/categories/githubbo-ke/'>github博客 (8)</a></li><li><a href='/blog/categories/ios/'>iOS (19)</a></li><li><a href='/blog/categories/ios-memory/'>iOS-Memory (4)</a></li><li><a href='/blog/categories/ios-nei-cun/'>iOS-内存 (1)</a></li><li><a href='/blog/categories/ios-duo-xian-cheng/'>iOS-多线程 (1)</a></li><li><a href='/blog/categories/ios-an-quan/'>iOS-安全 (1)</a></li><li><a href='/blog/categories/ios-wang-luo/'>iOS-网络 (12)</a></li><li><a href='/blog/categories/ios-she-ji-mo-shi/'>iOS-设计模式 (1)</a></li><li><a href='/blog/categories/iosyou-hua/'>iOS优化 (1)</a></li><li><a href='/blog/categories/mac/'>Mac (4)</a></li><li><a href='/blog/categories/mac-duo-xian-cheng/'>Mac-多线程 (1)</a></li><li><a href='/blog/categories/nginx/'>nginx (3)</a></li><li><a href='/blog/categories/php/'>php (3)</a></li><li><a href='/blog/categories/python/'>python (12)</a></li><li><a href='/blog/categories/swift/'>swift (11)</a></li><li><a href='/blog/categories/uml/'>UML (8)</a></li><li><a href='/blog/categories/xcode/'>Xcode (11)</a></li><li><a href='/blog/categories/chan-pin-she-ji/'>产品设计 (2)</a></li><li><a href='/blog/categories/gong-ju/'>工具 (1)</a></li><li><a href='/blog/categories/shu-ju-ku/'>数据库 (2)</a></li><li><a href='/blog/categories/sheng-huo-pian-duan/'>生活片段 (10)</a></li><li><a href='/blog/categories/zhi-ye-sheng-ya/'>职业生涯 (7)</a></li><li><a href='/blog/categories/du-shu/'>读书 (2)</a></li></ul>
</section>
<section>
  <h1>外部链接</h1>
    <ul id="外部链接">
    	<li><a href="https://developer.apple.com">苹果开发者中心</a> </li>
    	<li><a href="http://stackoverflow.com/questions/tagged/ios">stackoverflow</a></li>
    	<li><a href="http://ksnowlv.blog.163.com/blog/#m=0">ksnowlv网易博客</a></li>
	</ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2015 - 律威 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>

  <script type="text/javascript">var cnzz_protocol = (("https:" == document.location.protocol) ? " https://" : " http://");document.write(unescape("%3Cspan id='cnzz_stat_icon_1253538110'%3E%3C/span%3E%3Cscript src='" + cnzz_protocol + "v1.cnzz.com/z_stat.php%3Fid%3D1253538110%26online%3D1' type='text/javascript'%3E%3C/script%3E"));</script>

  <script type="text/javascript">
var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F4c1727a94ea20751730e8a556dbdbf82' type='text/javascript'%3E%3C/script%3E"));
</script>

</p>



</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'ksnowlv';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>








</body>
</html>
